#ifndef CONFIG_H
#define CONFIG_H

#include <Arduino.h>

#define CONFIG_NODE_ID   "5a06bafb-e479-4dc3-87d9-d79734d71f13"
#define CONFIG_USERNAME  "node_d935168a3a77"
#define CONFIG_PASSWORD  "G9XqOmsUYuSgq3mmWd0ecTmP"
#define CONFIG_CRYPTOKEY "B262DF3DCFCAEB149785BFDB3E84CF1535EF0F849FCB702449CD9A5DC037545F"
// #define CONFIG_MQTT_SERVER "broker.remotextr.com"
#define CONFIG_MQTT_SERVER "mqtt.myvpn.id.vn"
#define CONFIG_MQTT_PORT 1883
extern const char* NODE_ID;
extern const char* USERNAME;
extern const char* PASSWORD;
extern const char* CRYPTOKEY;

#define sim7070 Serial1
#define MODEM_PWR_PIN 12
#define CONTACT_PIN 20
#define PWR_ON_PIN 4
#define PWR_OFF_PIN 3

#define ADC_PIN_1 A0
#define ADC_PIN_2 A1
#define ADC_PIN_3 A2
#define BATT_VOLTS A3
#define Input_Supply_V 21

#define RS485_RX_PIN 5
#define RS485_TX_PIN 6
#define METER_ADDRESS 0x01
#define METER_FUNCTION_CODE 0x04
#define METER_NUM_REGISTERS 0x0002
#define METER_FLOW_UNIT_ADDRESS 0x0006
#define METER_FLOW_RATE_ADDRESS 0x0005
#define METER_CUMULATIVE_ADDRESS 0x000A
#define MAX_HISTORY_SIZE 60
#define WATER_METER_READ_INTERVAL_MS 15000

// #define PDP_CID 7
#define PDP_CID 1
// #define PDP_APN "iot.1nce.net"
// #define PDP_APN "v-internet"
#define PDP_APN "m3-world"

#define USERNAME_APN ""
#define PASSWORD_APN ""

#define NETWORK_MODE_NB 0

#define HW_WDT_TIMEOUT_SEC 120

extern const char mqtt_server[];
extern const int mqtt_port;

#define BAT_THRESH_PCT 90
#define BAT_HYST_PCT 3
#define PUB_FAST_MS 15000UL
#define PUB_SLOW_MS 15000UL

#define CHECK_INTERVAL_MS 15000UL
#define HEALTH_QUIET_MS 2000UL
#define TEMP_CHECK_INTERVAL_MS 10000UL

#define PWRKEY_MS 1600UL
#define PRE_DRAIN_MS 40UL
#define OFF_WAIT_MS 9000UL
#define BOOT_WAIT_MS 6000UL

#define RECONN_INTERVAL_MS 10000UL
#define RECONNECT_DEBOUNCE_MS 5000UL

#define MIN_RESTART_GAP_MS 15000UL

#define PROTECT_ON_MS 120000UL
#define PROTECT_TICK_MS 10000UL

#define AT_FAILS_BEFORE_RESTART 2
#define GPRS_FAILS_BEFORE_RESTART 3
#define MQTT_FAILS_BEFORE_RESTART 3
#define RECENT_OK_GRACE_MS 16000UL

#define ADC_VREF 3.3f
#define ADC_MAX 4095.0f
#define R_TOP 100000.0f
#define R_BOTTOM 220000.0f

#define READ_RESPONSE_WAIT_MS 300
#define SIM_WAIT_MS 1000
#define ON_PULSE_MS 5000

#define MODEM_BAUD_RATE 115200
#define MODEM_POWER_PIN 12

#define PDP_CONTEXT_ID PDP_CID
#define APN_NAME PDP_APN

#define MQTT_MAX_RECONNECT_ATTEMPTS 3
#define MQTT_KEEPALIVE_SEC 60
#define MQTT_BUFFER_SIZE 10

#endif
